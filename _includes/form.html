{% unless page.comments == false %}
{% capture post_slug %}{{ page.slug | slugify: "latin" }}{% endcapture %}
<form method="post" onsubmit="return submitForm(this);" action="{{ site.comments-post }}" class="commentform" data-action="{{ site.comments-post }}">
<h3 class="new-comment">Napisz komentarz:</h3>
<input name="fields[slug]" type="hidden" value="{{ post_slug }}" class="commentform-input commentform-input-slug">
<input name="options[slug]" type="hidden" value="{{ post_slug }}" class="commentform-input commentform-input-optionsslug">
<input name="options[redirect]" type="hidden" value="{{ page.slug }}">
<fieldset>
<label for="name">Imię (Wyświetlane, wymagane)
<input name="fields[name]" type="text" id="name" placeholder="Jan Kowalski" required title="To pole jest wymagane" class="commentform-input commentform-input-name">
</label>
</fieldset>
<fieldset>
<label for="email">E-mail (Ukryty, wymagany)
<input name="fields[email]" id="email" type="email" placeholder="jan@kowalski.com" required title="To pole jest wymagane" maxlenght="50" spellcheck="false" class="commentform-input commentform-input-email">
</label>
</fieldset>
<fieldset>
<label for="message">Wiadomość (Wyświetlana, wymagana)
<textarea name="fields[message]" type="text" id="message" placeholder="Twoja wiadomość" title="To pole jest wymagane" maxlenght="200" required autocomplete="off"  class="commentform-input commentform-input-message"></textarea>
</label>
</fieldset>
<!-- Honeypot -->
<fieldset class="hp">
<label for="hp">Zabezpieczenie (Nie wypełniaj!)
<input name="fields[hp]" type="text" id="hp" placeholder="Nie wypełniaj tego! To jest zabezpieczenie przeciwko botom">
</label>
</fieldset>
<!-- /Honeypot -->
<p>Markdown jest obsługiwany.</p>
<p>Komentarze pojawią się po zaakceptowaniu przez moderatora.</p>
<button class="submit" type="submit">Wyślij komentarz</button>
</form>
{% else %}
<div class="notice">
<h4>Dodawanie komentarzy zostało zablokowane.</h4>
</div>
{% endunless %}

{% comment %}
<!-- ======================== -->
<!-- Not working code, to fix -->
<!-- ======================== -->
<div class="commentform-sendfailed">
Wiadomość nie mogła zostać wysłana, proszę spróbować później.
</div>
<div class="commentform-sendsucceeded">
Dziękuje, twój komentarz został poprawnie wysłany!
</div>
<div class="commentform-errormessages"></div>
<script>
"use strict";
function submitForm(oFormElement)
{
  var xhr = new XMLHttpRequest();
  xhr.onload = function(){ alert(xhr.responseText); }
  xhr.open(oFormElement.method, oFormElement.getAttribute("action"));
  xhr.send(new FormData(oFormElement));
  return false;
}
</script>
<!-- /======================== -->
<!-- /Not working code, to fix -->
<!-- /======================== -->
{% endcomment %}