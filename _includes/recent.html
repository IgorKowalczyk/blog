<div class="post-recent">
<h3>Polecane posty:</h3>
<ul>
{% assign posts = site.posts | where_exp:"post", "post.url != page.url" | sample: 2 %}
{% for post in posts %}
<li>
<a href="{{ site.url }}{{ post.url | prepend: site.baseurl }}" target="_blank">
<div>
<div class="post-related-title">{{ post.title }}</div>
<p class="post-summary">{{post.content | markdownify | strip_html | truncatewords: 15}}</p>
</div>
</a>
</li>
{% endfor %}
</ul>
</div>


<div class="post-recent">
<h3>Polecane posty:</h3>
{% assign maxRelated = 2 %}
{% assign minCommonTags =  1 %}
{% assign maxRelatedCounter = 0 %}


{% for post in site.posts %}
<ul>
<li>
{% assign sameTagCount = 0 %}
{% assign commonTags = '' %}
{% for tag in post.tags %}
{% if post.url != page.url %}
{% if page.tags contains tag %}
{% assign sameTagCount = sameTagCount | plus: 1 %}
{% capture tagmarkup %} <span class="label-default">{{ tag }}</span> {% endcapture %}
{% assign commonTags = commonTags | append: tagmarkup %}
{% endif %}
{% endif %}
{% endfor %}
{% if sameTagCount >= minCommonTags %}
<a href="{{ site.url }}{{ post.url | prepend: site.baseurl }}" target="_blank">
<div>
<div class="post-related-title">{{ post.title }}</div>
<p class="post-summary">{{post.content | markdownify | strip_html | truncatewords: 15}}</p>
</div>
</a>
{% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
{% if maxRelatedCounter >= maxRelated %}
{% break %}
{% endif %}
{% endif %}
</li>
</ul>
{% endfor %}
</div>